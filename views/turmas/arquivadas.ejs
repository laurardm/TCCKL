<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Turmas Arquivadas</title>
  <link rel="stylesheet" href="/css/turmasArquivadas.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/logo.css">
</head>
<body>
  <h1>Turmas Arquivadas</h1>

  <div class="caixabotao">
    <div class="anos">
      <% 
        // turmas aqui vem do route /turmas/arquivadas como array de objetos { ano: value }
        const anos = [...new Set(turmas.map(t => (t.ano === null || t.ano === undefined || t.ano === "") ? "Sem ano" : t.ano))].sort((a, b) => {
          // ordena anos numericamente quando possível, senão alfabeticamente descendente
          const na = isNaN(Number(a)) ? a : Number(a);
          const nb = isNaN(Number(b)) ? b : Number(b);
          if (typeof na === 'number' && typeof nb === 'number') return nb - na;
          if (na > nb) return -1;
          if (na < nb) return 1;
          return 0;
        });
        anos.forEach(ano => { 
      %>
        <a href="/turmas/arquivadas/<%= encodeURIComponent(ano) %>">
          <button class="botao-ano"><%= ano %></button>
        </a>
      <% }); %>
    </div>

    <div class="ver-ativas">
      <a href="/turmas">
        <button class="botao botao-ativas">Voltar para Turmas Ativas</button>
      </a>
    </div>
  </div>

  <div id="mensagem-sucesso"></div>

  <div id="footer"></div>
  <div id="logo"></div>

  <script src="/js/footer.js"></script>
  <script src="/js/logo.js"></script>
  <script>
    // Utilitário simples caso queira reusar popup nesta página (usado na página do ano)
    function mostrarMensagem(texto, erro = false) {
      const msg = document.getElementById("mensagem-sucesso");
      msg.textContent = texto;
      msg.className = erro ? "error show" : "show";
      setTimeout(() => msg.classList.remove("show"), 3000);
    }
  </script>
</body>
</html>
