<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Turmas</title>
  <link rel="stylesheet" href="css/telaturmas.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/logo.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Questrial&display=swap" rel="stylesheet">
</head>

<body>
  
  <div class="caixabotao" id="turmasContainer">
  <div class="botoes">
    <% turmas.forEach(turma => { %>
      <div class="turma-item">
        <a href="/turmas/<%= turma.nome %>">
          <button class="botao"><%= turma.nome %></button>
        </a>

        <% if (usuario?.tipo === "funcionario") { %>
          <form action="/turmas/<%= turma.cod %>/arquivar?_method=PUT" method="POST" style="display:inline;">
            <input type="hidden" name="arquivada" value="1">
            <button type="submit" class="arquivar">Arquivar</button>
          </form>
        <% } %>
      </div>
    <% }) %>
  </div>

  <!-- Botão para visualizar turmas arquivadas -->
  <div class="ver-arquivadas">
    <a href="/turmas/arquivadas">
      <button class="botao botao-arquivadas">Ver Turmas Arquivadas</button>
    </a>
  </div>

  <button onclick="voltar()" class="botaodevoltar">Voltar</button>
</div>


  <div id="footer"></div>
  <div id="logo"></div>

  <script src="/js/footer.js"></script>
  <script src="/js/logo.js"></script>

  <script>
    function voltar() {
      const paginaAnterior = sessionStorage.getItem("voltarPara");

      // Se for diferente da página atual, volta para ela
      if (paginaAnterior && paginaAnterior !== location.pathname) {
        window.location.href = paginaAnterior;
      } else {
        // Se não houver registro ou for a mesma, redireciona para login ou outra rota segura
        window.location.href = "/";
      }
    }
  </script>

</body>
</html>
